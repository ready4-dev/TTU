---
title: "TEST"
author: "Matthew Hamilton"
date: "06/08/2020"
graphics: yes
params:
  output_type_1L_chr: HTML
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(comment=NA)
library(kableExtra)
library(flextable)
library(xtable) # EDIT
library(FBaqol) # EDIT
library(magrittr)
options(tinytex.verbose = TRUE)
options(xtable.floating = FALSE)
options(xtable.timestamp = "")
```

```{r, include=FALSE}
path_to_mdl_1L_chr <- "../../../../../../../Data/Project/Utility_Models/PHQ9_GSN_LOG.RDS"
#mdl_ls <- readRDS(path_to_mdl_1L_chr)
paths_to_mdl_plts_chr <- paste0(path_to_mdl_1L_chr %>% stringr::str_sub(end=-5), paste0("_",c("coefs","hetg", "dnst","sctr_plt"),".png"))
plt_nms_chr <- c("Caption 1","Caption 2","Caption 3","Caption 4")
output_ls <- list(`First predictor` = paths_to_mdl_plts_chr,
                  `Second predictor` = paths_to_mdl_plts_chr)
plt_nms_chr <- rep(plt_nms_chr,2)
#fig_nums <- captioner::captioner()
```


`r officer::run_pagebreak()`
\newpage

<!-- \blandscape -->

```{r echo = F, results="asis"}
brms_mdl_print_ls <- make_brms_mdl_print_ls(mdl_ls = readRDS(path_to_mdl_1L_chr),
label_stub_1L_chr = "LABELSTUB",
caption_1L_chr = "CAPTION FOR TABLE",
output_type_1L_chr = params$output_type_1L_chr,
footnotes_chr = rep("TEST",15) %>% paste0(collapse=",")) 
rlang::exec(print_table_xx,!!!brms_mdl_print_ls[[5]])
```

<!-- \elandscape -->
<!-- \newpage -->
```{r results='asis', echo=F}
#From: https://stackoverflow.com/questions/20409172/how-to-display-verbatim-inline-r-code-with-backticks-using-rmarkdown
# rinline <- function(code) { 
#   sprintf('``` `r %s` ```', code)
# }
# rinline(fig_nums('pressure-plot', 'pressure against temperature'))
#cat(fig_nums('pressure-plot', 'pressure against temperature'))
#cat("\"\`r fig_nums(\"pressure-plot\", \"pressure against temperature\")\`\"")
#cat("some text \u0060r 2+3\u0060 and more text")
```

<!-- `r fig_nums("lab1", display = "cite")` -->
 
```{r, fig.cap=plt_nms_chr, echo=FALSE, message=F}
knitr::include_graphics(paths_to_mdl_plts_chr)
# cat('\n')
# cat("###", "TEST", "\n\n")
# for(plots in mdl_plts_ls){
#   print(mdl_plts_ls)
#   cat('\n\n')
# }
```
